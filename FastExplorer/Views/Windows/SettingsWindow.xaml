<ui:FluentWindow
    x:Class="FastExplorer.Views.Windows.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="clr-namespace:FastExplorer.Helpers"
    xmlns:local="clr-namespace:FastExplorer.Views.Windows"
    xmlns:localization="clr-namespace:FastExplorer.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="{localization:LocalizationHelperExtension Settings}"
    Width="800"
    Height="600"
    d:DataContext="{d:DesignInstance local:SettingsWindow,
                                     IsDesignTimeCreatable=False}"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ResizeMode="CanResize"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">
    <Window.Resources>
        <helpers:ThemeColorSelectionConverter x:Key="ThemeColorSelectionConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>

    <Grid>
        <Grid.Style>
            <Style TargetType="Grid">
                <!--  デフォルトはライトテーマのテーマカラー背景  -->
                <Setter Property="Background" Value="{Binding ViewModel.SelectedAccentLightBrush}" />
                <Style.Triggers>
                    <!--  ダークテーマの時はシステムのダーク背景を優先  -->
                    <DataTrigger Binding="{Binding ViewModel.CurrentTheme}" Value="Dark">
                        <Setter Property="Background" Value="{DynamicResource ApplicationBackgroundBrush}" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ui:TitleBar
            x:Name="TitleBar"
            Title="{localization:LocalizationHelperExtension Settings}"
            Grid.Row="0"
            Panel.ZIndex="1000"
            CloseWindowByDoubleClickOnIcon="True"
            ShowMaximize="True"
            ShowMinimize="True">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/Assets/wpfui-icon-256.png" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <ui:NavigationView
                x:Name="SettingsNavigationView"
                Grid.Column="0"
                PaneDisplayMode="Left"
                IsBackButtonVisible="Collapsed"
                IsPaneToggleVisible="False"
                ItemInvoked="NavigationView_ItemInvoked">
                <ui:NavigationView.MenuItems>
                    <ui:NavigationViewItem
                        x:Name="GeneralNavItem"
                        Tag="General"
                        Content="{localization:LocalizationHelperExtension General}">
                        <ui:NavigationViewItem.Icon>
                            <ui:SymbolIcon Symbol="Settings24" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem
                        x:Name="AppearanceNavItem"
                        Tag="Appearance"
                        Content="{localization:LocalizationHelperExtension Appearance}">
                        <ui:NavigationViewItem.Icon>
                            <ui:SymbolIcon Symbol="PaintBrush24" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem
                        x:Name="AboutNavItem"
                        Tag="About"
                        Content="{localization:LocalizationHelperExtension AboutApplication}">
                        <ui:NavigationViewItem.Icon>
                            <ui:SymbolIcon Symbol="Info24" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                </ui:NavigationView.MenuItems>
            </ui:NavigationView>

            <!--  コンテンツエリア  -->
            <Frame
                x:Name="SettingsContentFrame"
                Grid.Column="1"
                NavigationUIVisibility="Hidden" />
        </Grid>
    </Grid>
</ui:FluentWindow>
